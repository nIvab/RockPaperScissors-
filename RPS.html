<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Rock, Paper, Scissors</title>
    </head>
    <body>
        <script>

            function checkValidMove(move){
                if(move != "rock" && move!="paper" && move!="scissors"){
                    return "Please enter valid move" ;
                } else {
                    return "fine" ;
                }
            }

            function cleanMove(move) {
                if(move == "R" || move == "r"){
                    return "rock" ;
                } else if(move == "P" || move == "p"){
                    return "paper" ;
                } else if(move == "S" || move == "s"){
                    return "scissors" ;
                } else{
                   cleaned = move.toLowerCase()
                   return cleaned ;
                }
            }

            function compMoveGenerator(){
                let moveDecider = Math.random() ;
                if(moveDecider <= 1/3){
                    return "rock" ;
                } else if(moveDecider > 1/3 && moveDecider <= 2/3){
                    return "paper" ;
                } else{
                    return "scissors" ;
                }
            }

            function whoIsTheWinner(player, comp){
                if(player == comp){
                    return "draw" ; 
                } else if( player == "rock" && comp == "scissors" ||
                        player == "paper" && comp == "rock" ||
                        player == "scissors" && comp == "paper"){
                    return "you win!" ; 
                } else if( comp == "rock" && player == "scissors" ||
                        comp == "paper" && player == "rock" ||
                        comp == "scissors" && player == "paper"){
                        return "you lose!" ; 
                } else{
                    return "something went wrong here, you should be seeing this"
                }
            }

            function RockPaperScissors(move) {
                //check input
                
                if(typeof(move)!="string"){
                    return "Please enter a valid move that is a string"
                }
                //clean everything up a bit
                let playerMove = cleanMove(move)

                // Ensure we have proper input (one of rock, paper, scissors)
                if(checkValidMove(cleanMove)== "fine"){
                    return checkValidMove(cleanMove) ;
                }
                
                let compMove = compMoveGenerator() 
                return whoIsTheWinner(playerMove, compMove) ; 
            }

                function game() {
                    console.log("We will play Rock, Paper, Scissors to the best of five!")
                    let yourScore = 0 
                    let compScore = 0 
                    for(i=0; i<5 ; i++){
                        yourMove = prompt("please enter a move: ")
                        result = RockPaperScissors(yourMove)
                        if(result=="you win!"){
                            yourScore++
                        } else if(result=="you lose!"){
                            compScore++
                        }else{
                            console.log("Draw!")
                        }

                        console.log(`Score:     You: ${yourScore},  Computer: ${compScore}`)
                    }
                    if(yourScore>compScore){
                        return "You win the tourney!" ; 
                    } else if(compScore > yourScore){
                        return "You lose the tourney!" ;
                    } else{
                        return "It was a draw!" ; 
                    }
            }

        </script>
    </body>
</html>